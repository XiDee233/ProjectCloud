# 修改连接模式管理计划

## 1. 现有问题分析

当前代码存在以下问题：
- 方法命名不准确（`StartGame` 不能准确表示连接模式设置）
- 连接模式设置与游戏启动耦合在一起
- 不支持在游戏中随时切换连接模式
- 缺少单人/多人模式的明确区分

## 2. 实现方案

### 2.1 核心修改点

#### 2.1.1 添加游戏模式枚举
```csharp
public enum GameMode
{
    SinglePlayer,
    MultiPlayer
}
```
用于明确区分单人/多人模式

#### 2.1.2 修改方法命名
- 将 `StartGame` 重命名为更准确的 `SetConnectionMode`
- 添加 `SetGameMode` 方法，用于切换单人/多人模式

#### 2.1.3 解耦连接模式与游戏启动
- 允许在游戏运行时随时切换连接模式
- 简化方法逻辑，移除不必要的耦合

### 2.2 具体实现

#### 2.2.1 修改GameManager.cs
1. 添加GameMode枚举
2. 添加游戏模式变量
3. 修改连接模式设置逻辑
4. 添加游戏模式切换方法
5. 简化相关方法

#### 2.2.2 关键方法设计
```csharp
// 设置连接模式（Steam或本地）
public void SetConnectionMode(ConnectionMode mode)

// 设置游戏模式（单人或多人）
public void SetGameMode(GameMode mode)

// 创建游戏房间（支持Steam和本地模式）
public void CreateGameRoom(string roomName, int maxPlayers = 10)

// 加入游戏房间（支持Steam和本地模式）
public void JoinGameRoom(string roomId)
```

## 3. 实现步骤

1. 添加GameMode枚举
2. 添加游戏模式变量
3. 修改StartGame方法为SetConnectionMode
4. 添加SetGameMode方法
5. 简化现有方法，移除不必要的耦合
6. 确保所有方法支持在游戏中随时调用

## 4. 预期效果

- 玩家可以在游戏中随时切换单人/多人模式
- 玩家可以在游戏中随时切换Steam/本地模式
- 方法命名更准确，功能更清晰
- 代码结构更简洁，去除了不必要的耦合

## 5. 技术要点

- 保持代码简洁，不添加多余功能
- 支持动态切换连接模式
- 明确区分游戏模式和连接模式
- 移除不必要的启动依赖